<% expands('layout/body-main') %>

<% set_block('title', 'Devices') %>
<% set_title('Devices') %>
<% set_block('device-hack', '<!-- This is just a hack to fire the event -->') %>

<% start('container-fluid') %>

<table class="table table-bordered table-striped">
	<tr>
		<th>Name</th>
		<th>Device Type</th>
		<th>Automation Protocol</th>
		<th>Address</th>
		<th>Action</th>
	</tr>
	<% for (var i in devices) { %>
		<% var device = devices[i] %>
		<tr>
			<td><%= device.name %></td>
			<td><%= device.device_type %></td>
			<td><%= device.automation_protocol %></td>
			<td><%= device.address %></td>
			<td>
				<% for (var cmdname in device.interface.commands) { %>
					<% var cmd = device.interface.commands[cmdname] %>
					<button type="button"
						data-deviceid="<%= device._id %>"
						data-command="<%= cmd.name %>"
						title="<%= cmd.description %>"
						class="devicecommand btn <%= cmd.class %>">
							<%= cmd.title %>
					</button>
				<% } %>
			</td>
		</tr>
	<% } %>
</table>
<div class="row-fluid">
	
</div>

<% assign('device-hack') %>
<% end('container-fluid') %>